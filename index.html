<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kali Linux Terminal Replica</title>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #222831;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .kali-window {
      background: #23272e;
      border-radius: 8px;
      box-shadow: 0 0 32px 4px #000a;
      min-width: 720px;
      max-width: 90vw;
      min-height: 420px;
      border: 2px solid #20232a;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .kali-bar {
      background: linear-gradient(90deg, #454b53 0%, #343942 100%);
      height: 36px;
      display: flex;
      align-items: center;
      padding: 0 16px;
      user-select: none;
    }
    .kali-dots {
      display: flex;
      gap: 8px;
      margin-right: 12px;
    }
    .kali-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-top: 2px;
    }
    .kali-dot.red { background: #ff5f56; border: 1.5px solid #d32d23; }
    .kali-dot.yellow { background: #ffbd2e; border: 1.5px solid #b38a13; }
    .kali-dot.green { background: #27c93f; border: 1.5px solid #179a24; }
    .kali-bar-title {
      color: #c7c7c7;
      font-family: 'Fira Mono', monospace;
      font-size: 1.08em;
      margin-left: 6px;
      letter-spacing: 1px;
      flex: 1;
    }
    .kali-terminal {
      background: #121212;
      height: 350px;
      overflow-y: auto;
      padding: 18px 16px 12px 18px;
      font-family: 'Fira Mono', monospace;
      font-size: 1.12em;
      color: #eeeeee;
      outline: none;
      line-height: 1.5;
      flex: 1;
      user-select: text;
    }
    .prompt-line {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      font-size: 1em;
      margin-bottom: 1px;
    }
    .prompt {
      color: #00e676;
      font-weight: bold;
      user-select: none;
      font-size: 1.03em;
    }
    .prompt .user { color: #00bcd4; }
    .prompt .host { color: #ef5350; }
    .prompt .path { color: #ffd600; }
    .shell-input {
      background: none;
      border: none;
      color: inherit;
      font-family: inherit;
      font-size: 1em;
      outline: none;
      min-width: 20px;
      caret-color: transparent;
      padding: 0;
      margin-left: 2px;
      flex: 1 0 0;
      position: relative;
      z-index: 1;
    }
    .output {
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 1em;
      color: #cfcfcf;
      margin-left: 1.6em;
      margin-bottom: 1px;
    }
    .blinker {
      display: inline-block;
      width: 10px;
      height: 1.18em;
      vertical-align: middle;
      background: #eeeeee;
      margin-left: -10px;
      position: relative;
      z-index: 3;
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      50% { opacity: 0; }
    }
    .kali-terminal::-webkit-scrollbar {
      width: 10px;
      background: #222831;
    }
    .kali-terminal::-webkit-scrollbar-thumb {
      background: #343942;
      border-radius: 6px;
    }
    @media (max-width: 720px) {
      .kali-window { min-width: 99vw; }
      .kali-terminal { font-size: 0.93em; }
    }
    ::selection {
      background: #3f51b5;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="kali-window">
    <div class="kali-bar">
      <div class="kali-dots">
        <div class="kali-dot red"></div>
        <div class="kali-dot yellow"></div>
        <div class="kali-dot green"></div>
      </div>
      <span class="kali-bar-title">root@kali: ~</span>
    </div>
    <div class="kali-terminal" id="kali-terminal" tabindex="0" spellcheck="false"></div>
  </div>
  <script>
    // Fake file system for ls/cd realism
    const fileSystem = {
      "/": ["home", "root", "etc", "usr", "bin", "var", "tmp"],
      "/root": ["Desktop", "Documents", "Downloads", "Music", "Pictures", "Public", "Templates", "Videos"],
      "/root/Desktop": [],
      "/home": ["kali"],
      "/home/kali": ["Desktop", "Documents", "Downloads"],
      "/home/kali/Desktop": [],
      "/etc": [],
      "/usr": [],
      "/bin": [],
      "/var": [],
      "/tmp": [],
    };

    let currentPath = "/root";
    let history = [];
    let histPos = 0;

    const terminal = document.getElementById('kali-terminal');
    const promptTemplate = (cwd) =>
      `<span class="prompt"><span class="user">root</span>@<span class="host">kali</span>:<span class="path">${cwd.replace("/root", "~")}</span>#</span>`;

    // Banner
    const banner = [
      "┌──(root㉿kali)-[~]",
      "└─# Welcome to Kali Linux. Type 'help' to get started.",
      ""
    ];

    function addBanner() {
      for (const line of banner) {
        const div = document.createElement('div');
        div.textContent = line;
        terminal.appendChild(div);
      }
    }

    function scrollToBottom() {
      terminal.scrollTop = terminal.scrollHeight;
    }

    function addPrompt(inputVal = "") {
      const line = document.createElement('div');
      line.className = 'prompt-line';
      line.innerHTML = promptTemplate(currentPath) +
        `<input class="shell-input" id="shell-input" autocomplete="off" autofocus />` +
        `<span class="blinker" id="blinker"></span>`;
      terminal.appendChild(line);
      const inp = line.querySelector('.shell-input');
      inp.value = inputVal;
      inp.focus();
      scrollToBottom();
      inp.addEventListener('input', scrollToBottom);
    }

    function addOutput(text) {
      if (text === "") return;
      const out = document.createElement('div');
      out.className = 'output';
      out.textContent = text;
      terminal.appendChild(out);
      scrollToBottom();
    }

    function runCommand(cmd) {
      let out = "";
      let trimmed = cmd.trim();
      if (trimmed === "ls") {
        out = (fileSystem[currentPath] || []).join("  ");
      } else if (trimmed.startsWith("cd")) {
        let [, path] = trimmed.split(" ");
        if (!path || path === "~") path = "/root";
        else if (path === "..") {
          if (currentPath !== "/" && currentPath !== "/root") {
            currentPath = currentPath.replace(/\/[^\/]+$/, "") || "/";
          } else if (currentPath === "/root") {
            currentPath = "/";
          }
        } else if (path.startsWith("/")) {
          if (fileSystem[path]) currentPath = path;
          else out = `bash: cd: ${path}: No such file or directory`;
        } else if (fileSystem[currentPath + "/" + path]) {
          currentPath += "/" + path;
        } else if (fileSystem["/root/" + path] && currentPath === "/root") {
          currentPath = "/root/" + path;
        } else if (fileSystem["/" + path] && currentPath === "/") {
          currentPath = "/" + path;
        } else {
          out = `bash: cd: ${path}: No such file or directory`;
        }
      } else if (trimmed === "pwd") {
        out = currentPath;
      } else if (trimmed === "whoami") {
        out = "root";
      } else if (trimmed === "uname" || trimmed === "uname -a") {
        out = "Linux kali 6.3.0-kali1-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.3.7-1kali1 (2024-06-01) x86_64 GNU/Linux";
      } else if (trimmed === "clear") {
        terminal.innerHTML = '';
        addBanner();
        return;
      } else if (trimmed === "help") {
        out = [
          "Available commands: ls, cd, pwd, whoami, uname, clear, echo, help, exit",
          "Directory navigation is simulated."
        ].join("\n");
      } else if (trimmed.startsWith("echo ")) {
        out = trimmed.slice(5);
      } else if (trimmed === "exit") {
        out = "logout";
        setTimeout(() => window.location.reload(), 600);
      } else if (trimmed === "") {
        out = "";
      } else {
        out = `bash: ${trimmed.split(" ")[0]}: command not found`;
      }
      addOutput(out);
    }

    function handleInput(e) {
      const inp = document.getElementById('shell-input');
      if (!inp) return;
      if (e.key === 'Enter') {
        // Print prompt+command
        inp.parentNode.innerHTML = promptTemplate(currentPath) + " " + inp.value;
        history.push(inp.value);
        histPos = history.length;
        runCommand(inp.value);
        addPrompt();
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (histPos > 0) {
          histPos--;
          inp.value = history[histPos];
        }
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (histPos < history.length - 1) {
          histPos++;
          inp.value = history[histPos];
        } else {
          histPos = history.length;
          inp.value = '';
        }
      }
      scrollToBottom();
    }

    terminal.addEventListener('mousedown', () => {
      const inp = document.getElementById('shell-input');
      if (inp) inp.focus();
    });

    terminal.addEventListener('keydown', handleInput);

    terminal.addEventListener('focusout', () => {
      setTimeout(() => {
        const inp = document.getElementById('shell-input');
        if (inp) inp.focus();
      }, 10);
    });

    // Initial render
    addBanner();
    addPrompt();
    setTimeout(() => {
      const inp = document.getElementById('shell-input');
      if (inp) inp.focus();
    }, 100);
  </script>
</body>
</html>
